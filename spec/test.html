<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="../canny.js"></script>
    <script src="../mod/beardie.js"></script>

    <script>
        canny.add('beardieSample', (function () {
            var node,
                    data1 = {
                        name : 'beardie',
                        text : 'Dynamical included text'
                    },
                    data2 = function () {
                        return {
                            name : 'beardie'
                        };
                    },
                    data3 = function (cb) {
                         cb({
                             user : {
                                 name: 'Peter',
                                 age: 30
                             }
                         });
                    },
                    inputs = (function () {
                        var update = [];
                        return {
                            value : '',
                            notifierWhisker : function (value) {
                                update.forEach(function (fc) {
                                    fc({value: value});
                                });
                            },
                            whiskerUpdate : function (cb) {
                                update.push(cb);
                            }
                        };
                    }()),
                    triggerWhiskerUpdate = (function () {
                        var whiskerUpdate = function () {},
                                data = data2();
                        return {
                            // trigger this to update the data
                            updateData : function () {
                                whiskerUpdate(data2());
                            },
                            // part of api to whisker
                            whiskerUpdate : function (cb) {
                                whiskerUpdate = cb;
                            },
                            // object
                            name : data.name,
                            text : data.text
                        };
                    }());
            return {
                attributes : function (fc) {
                    fc({
                        id : 'idFoo',
                        testClass : 'classFoo'
                    })
                },
                attributes2 : function (fc) {
                    debugger
                    fc('scope2', {
                        testClass : 'bar'
                    })
                },
                supportScopes : function (fc) {
                    fc('scope1', {
                        id : 'foo1',
                        testClass : 'classTest1',
                        text : 'foo1'
                    });
                    fc('scope2', {
                        id : 'foo2',
                        testClass : 'classTest2',
                        text : 'foo2'
                    });
                    fc('scope3', {
                        id : 'foo3',
                        testClass : 'classTest3',
                        text : 'foo3'
                    });
                },
                add : function (node, attr) {}
            };
        }()));
    </script>
</head>
<body>

    <div id="checkAttributes" canny-mod="beardie" canny-var="{'bind':'scope', 'in':'canny.beardieSample.attributes'}">
        <!--<div id="{{scope.id}}" class="{{scope.testClass}}"></div>-->
        <div canny-mod="beardie" canny-var="canny.beardieSample.attributes2">
            <p class="test {{scope2.testClass}}">test</p>
        </div>
    </div>

    <!--<div id="supportMultipleScopes" canny-mod="beardie" canny-var="canny.beardieSample.supportScopes">-->
        <!--<div id="{{scope1.id}}" class="{{scope1.testClass}}">foo {{scope1.text}}</div>-->
        <!--<div id="{{scope2.id}}" class="{{scope2.testClass}}">foo {{scope2.text}}</div>-->
        <!--<div id="{{scope3.id}}" class="{{scope3.testClass}}">foo {{scope3.text}}</div>-->
    <!--</div>-->




</body>
</html>